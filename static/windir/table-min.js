const pending=new Set;async function getCellsInfo(){const t=await getData("/cellsinfo/");if("info"in t){var e=document.querySelectorAll(".cell");if(t.info.length==e.length)return void e.forEach((e,n)=>{e.classList.remove("present"),t.info[n]&&e.classList.add("present")})}console.log(t),document.getElementById("table-error").innerHTML="Не удалось загрузить данные о посещаемости. Повторите позже"}async function updateCell(e,n,t){var l=event.target;pending.has(l)||(pending.add(l),l.classList.add("pending"),"success"in(e=await getData("/tableupd/","PUT",{memberId:e,gameId:n,matchNo:t},!0))?l.classList.toggle("present"):"error"in e?document.getElementById("table-error").innerHTML=e.error:(console.log(e),document.getElementById("table-error").innerHTML="Ошибка. Повторите позже"),l.classList.remove("pending"),pending.delete(l))}getCellsInfo();